<div class="admincontainer">
    <h3>Add product</h3>
    <form [formGroup]="addProduct" (ngSubmit)="onAddProduct()">
        <div style="display: flex">
            <input placeholder="name" type="text" class="form-control" formControlName="name" id="name">
            <input placeholder="brand" type="text" class="form-control" formControlName="brand" id="brand">
        </div>
        <input placeholder="description" type="text" class="form-control" formControlName="description"
               id="description">
        <input placeholder="image path" type="text" class="form-control" formControlName="imagePath" id="imagePath">
        <select class="form-control" formControlName="category_id" id="category_id">
            <option value="">Select category</option>
            @for (category of categories; track $index) {
                <option value="{{ category.id }}">{{ category.name }}</option>
            }
        </select>
        <button type="submit" class="btn btn-md btn-dark" [disabled]="!addProduct.valid">Add product</button>
    </form>
</div>
<div class="admincontainer">
    <h3>Add variant</h3>
    <form [formGroup]="addVariant" (ngSubmit)="onAddVariant()">
        <select class="form-control" formControlName="product_id" id="product_id">
            <option value="">Select product</option>
            @for (product of products; track $index) {
                <option value="{{ product.id }}">{{ product.brand }} {{ product.name }}</option>
            }
        </select>
        <input placeholder="size" type="text" class="form-control" formControlName="size" id="size">
        <input placeholder="material" type="text" class="form-control" formControlName="material" id="material">
        <input placeholder="color" type="text" class="form-control" formControlName="color" id="color">
        <input placeholder="price" type="number" class="form-control" formControlName="price" id="price">
        <button type="submit" class="btn btn-md btn-dark" [disabled]="!addVariant.valid">Add product</button>
    </form>
</div>
<div>
    <h3>Remove product</h3>
    <ul>
        @for (product of products; track $index) {
            <div class="product">
                <img src="{{ product.imagePath }}" alt="{{ product.name }}" style="width: 100px; object-fit: contain;">
                    <div>
                    <h5 style="margin: 1px">{{ product.brand }} {{ product.name }}</h5>
                    <button style="margin: 1px" (click)="onRemoveProduct(product.id)" class="btn-outline-primary">
                        Remove
                    </button>
                    <div class="productvariants">
                        <h6>Variants</h6>
                        @if (product.productProperties.length == 0) {
                            <p style="color: brown">No variants</p>
                        } @else {
                            <ul class="variantlist">
                            @for (property of product.productProperties; track $index) {
                                <li class="variant">
                                    <div style="margin: 1px">
                                        <p style="margin: 1px">
                                            Size <strong>{{ property.size }}</strong><br>
                                            Material <strong>{{ property.material }}</strong><br>
                                            Color <strong>{{ property.color }}</strong>
                                        </p>
                                        <p style="margin: 1px">{{ property.price | currency }}</p>
                                    </div>
                                    <button style="margin: 1px" (click)="onRemoveVariant(property.id)" class="btn-outline-primary">
                                        Remove
                                    </button>
                                </li>
                            }
                            </ul>
                        }
                    </div>
                </div>
            </div>
        }
    </ul>
</div>